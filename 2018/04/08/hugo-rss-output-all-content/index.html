<!doctype html><html lang=zh-hans><!doctype html><html><head><title>Hugo RSS 配置输出全文</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A blog maintained by an interesting programmer."><meta name=keywords content="Technology,Code,Program,Linux,"><meta name=author content="Xuanwo"><meta property="og:title" content="Hugo RSS 配置输出全文"><meta property="og:description" content="A blog maintained by an interesting programmer."><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://xuanwo.io/2018/04/08/hugo-rss-output-all-content/"><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/instantsearch.css@7.4.2/themes/algolia-min.css integrity="sha256-HB49n/BZjuqiCtQQf49OdZn63XuKFaxcIHWf0HNKte8=" crossorigin=anonymous><link rel=stylesheet href=/css/main.min.07c86322f1d5e9d3b42182e40c818cc8042d461f64661e263ffaad968d672df1.css integrity="sha256-B8hjIvHV6dO0IYLkDIGMyAQtRh9kZh4mP/qtlo1nLfE="><script defer src=/javascript/fontawesome.min.a066b72a16bb5f37fe57ab06f6409b5bf30239d82ab5a71987e6abcac78bf2f0.js integrity=sha256-oGa3Kha7Xzf+V6sG9kCbW/MCOdgqtacZh+aryseL8vA=></script><link href=http://gmpg.org/xfn/11 rel=profile><meta name=generator content="Hugo 0.72.0"></head><body class="min-h-full font-sans leading-normal"><header><nav class="container text-gray px-4"><div class="py-2 flex flex-col lg:flex-row flex-wrap justify-between items-center"><a class="text-2xl text-gray-900 hover:no-underline flex-shrink-0 font-normal" href=/>漩涡的博客</a><div class="flex flex-col lg:flex-row items-center w-full lg:w-auto"><a class="header-link flex-shrink-0 hover:no-underline hover:text-grey-700 relative mr-0 lg:mr-8 my-2 lg:my-0 text-gray-500" href=/about/>关于我</a>
<a class="header-link flex-shrink-0 hover:no-underline hover:text-grey-700 relative mr-0 lg:mr-8 my-2 lg:my-0 text-gray-500" href=/en-us/>English Version</a><div class=relative><span class=algolia-autocomplete style=position:relative;display:inline-block;direction:ltr><input id=search-box class="transition-colors duration-100 ease-in-out focus:outline-0 border border-transparent focus:bg-white focus:border-gray-300 placeholder-gray-500 rounded-lg bg-gray-200 py-2 pr-4 pl-10 block w-full appearance-none leading-normal ds-input" type=text autocomplete=off spellcheck=false role=combobox dir=auto style=position:relative;vertical-align:top></span><div class="pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center"><svg class="fill-current pointer-events-none text-gray-600 w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.9 14.32a8 8 0 111.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 108 2a6 6 0 000 12z"/></svg></div></div></div></div></nav></header><main class="flex-1 px-4"><article class="container pt-16"><header class="pb-4 mb-8 border-b"><h1 class="my-2 text-black leading-tight">Hugo RSS 配置输出全文</h1><ul class="mb-0 pb-0 text-sm text-grey-500"><li class="block sm:inline-block mr-3"><time class="text-lg font-light" datetime=2018-04-08T16:07:00.000+00:00 itemprop=datePublished>2018-04-08</time></li><li class="block sm:inline-block mr-3"><a class="text-lg font-light" href=https://xuanwo.io/tags/hugo><span>#Hugo</span></a>
<a class="text-lg font-light" href=https://xuanwo.io/tags/blog><span>#Blog</span></a></li></ul></header><div class=post-content><p>在折腾 Feedly 的时候偶然发现自己的博客输出的 RSS 里面只有摘要，想要看完整的内容需要跳转。这可不符合我的初衷，于是花了一些时间配置了一下相关的内容。接下来简要的介绍一下如何配置 Hugo 的模板以生成输出全文的 RSS Feed。</p><h2 id=rtfm>R.T.F.M.</h2><p>在折腾之前，首先阅读一下 Hugo 的文档： <a href=https://gohugo.io/templates/rss/>https://gohugo.io/templates/rss/</a> 。从文档中知道了以下两件事：</p><ul><li>RSS 模板的查找顺序</li><li>Hugo 自带的 RSS 模板的内容</li></ul><p>那么想要自定义 RSS 模板的话，只需要在合适的地方放上模板即可。</p><h2 id=rss-模板的位置>RSS 模板的位置</h2><p>Hugo 内置模板查找的优先级别是最低的，所以只要选择任意一个符合要求的位置都能覆盖它。我选择放在主题的 <code>layouts</code> 目录下，也就是 <code>layouts/index.rss.xml</code>。</p><h2 id=rss-模板的内容>RSS 模板的内容</h2><p>忽略掉一些无关的细节，导致 RSS 输出的文章内容中只有摘要的是如下模板：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>range</span><span style=color:#bbb> </span><span style=color:#4070a0>.Data.Pages</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
&lt;<span style=color:#062873;font-weight:700>item</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>title</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Title</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>title</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>link</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>link</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>pubDate</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Date.Format</span><span style=color:#bbb> </span><span style=color:#4070a0>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span>safeHTML<span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>pubDate</span>&gt;
  <span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>.Site.Author.email</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>$.Site.Author.name</span><span style=color:#bbb> </span><span style=color:#007020>}}</span> (<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}</span>)<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>
  &lt;<span style=color:#062873;font-weight:700>guid</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>guid</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>description</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Summary</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>html</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>description</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>item</span>&gt;
<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>end</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
</code></pre></div><p><code>.Summary</code> 引用的是文章的摘要部分，只要将其替换为 <code>.Content</code> 就能输出文章的完整内容。但是默认情况下，Hugo 会在 RSS Feed 中输出所有文章，如果输出完整内容的话，这个 Feed 会特别大，因此需要想办法限制一下展示的文章数量。继续 RTFM，<a href=https://gohugo.io/functions/first/>此处</a> 描述了一个叫 <code>first</code> 的方法，跟 <code>range</code> 搭配起来之后可以起到切片的作用。这样就能够得到如下的模板：</p><div class=highlight><pre style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>range</span><span style=color:#bbb> </span>first<span style=color:#bbb> </span>10<span style=color:#bbb> </span><span style=color:#4070a0>.Data.Pages</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
&lt;<span style=color:#062873;font-weight:700>item</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>title</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Title</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>title</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>link</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>link</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>pubDate</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Date.Format</span><span style=color:#bbb> </span><span style=color:#4070a0>&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span>safeHTML<span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>pubDate</span>&gt;
  <span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>.Site.Author.email</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>with</span><span style=color:#bbb> </span><span style=color:#4070a0>$.Site.Author.name</span><span style=color:#bbb> </span><span style=color:#007020>}}</span> (<span style=color:#007020>{{</span><span style=color:#4070a0>.</span><span style=color:#007020>}}</span>)<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>author</span>&gt;<span style=color:#007020>{{</span><span style=color:#007020;font-weight:700>end</span><span style=color:#007020>}}</span>
  &lt;<span style=color:#062873;font-weight:700>guid</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Permalink</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>guid</span>&gt;
  &lt;<span style=color:#062873;font-weight:700>description</span>&gt;<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#4070a0>.Content</span><span style=color:#bbb> </span><span style=color:#666>|</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>html</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>&lt;/<span style=color:#062873;font-weight:700>description</span>&gt;
&lt;/<span style=color:#062873;font-weight:700>item</span>&gt;
<span style=color:#007020>{{</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>end</span><span style=color:#bbb> </span><span style=color:#007020>}}</span>
</code></pre></div><p>完整的模板可以参见 commit: <a href=https://github.com/Xuanwo/xuanwo.github.io/commit/80347d6e7868f4443170fe926a762d496b736944>https://github.com/Xuanwo/xuanwo.github.io/commit/80347d6e7868f4443170fe926a762d496b736944</a></p><h2 id=动态>动态</h2><ul><li>Feedly 上除了我自己居然要还有 5 个订阅用户，有些感动，如果有在北京的童鞋可以邮件我一起约个饭~</li><li>清明节去了趟苏州，看到了大裤衩，还看了金鸡湖的音乐喷泉，然后拙政园基本啥都没看着，全是人头= =，出来之后就不想再去任何园林了</li><li>终于下定决心买了 ThinkPad X1 Carbon 2018 (故意写全就是为了装)，等四月底到手了发一波开箱照</li><li>又要开工了，体会到了久违的小学生暑假开学前一天的心情，大概是因为以前一直没有好好的休假过。。。</li></ul></div></article></main><footer><div class="container px-4"><div class="flex flex-col md:flex-row justify-between py-4"><div class="flex-shrink-0 flex flex-wrap md:w-1/3 mt-4 md:mt-0"><span class="flex-shrink-0 w-1/5 mb-2 text-center lg:text-left"><a class="footer-link relative text-gray-500 hover:text-gray-100 hover:no-underline" href=/archives/>归档</a></span>
<span class="flex-shrink-0 w-1/5 mb-2 text-center lg:text-left"><a class="footer-link relative text-gray-500 hover:text-gray-100 hover:no-underline" href=/categories/>分类</a></span>
<span class="flex-shrink-0 w-1/5 mb-2 text-center lg:text-left"><a class="footer-link relative text-gray-500 hover:text-gray-100 hover:no-underline" href=/tags/>标签</a></span>
<span class="flex-shrink-0 w-1/5 mb-2 text-center lg:text-left"><a class="footer-link relative text-gray-500 hover:text-gray-100 hover:no-underline" href=/series/>系列</a></span>
<span class="flex-shrink-0 w-1/5 mb-2 text-center lg:text-left"><a class="footer-link relative text-gray-500 hover:text-gray-100 hover:no-underline" href=/blogroll/>友链</a></span></div><ul class="flex sm:w-1/2 md:w-1/3 text-center lg:text-right"><li class=w-1/4><a class="text-gray-500 hover:text-gray-800" href=/index.xml><i class="fas fa-rss"></i></a></li><li class=w-1/4><a class="text-gray-500 hover:text-gray-800" href=https://github.com/Xuanwo><i class="fas fa-github"></i></a></li><li class=w-1/4><a class="text-gray-500 hover:text-gray-800" href=https://t.me/xuanwo_read_later><i class="fas fa-telegram-plane"></i></a></li><li class=w-1/4><a class="text-gray-500 hover:text-gray-800" href=https://twitter.com/OnlyXuanwo><i class="fas fa-twitter"></i></a></li></ul></div></div><script src=https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.js integrity="sha256-KiHRWUnyloQ6hvdcRAfi7hwExmviOdyWTRFBLmDNhHc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js integrity="sha256-YVWQosorZnr6fALvOW9VALYuInld27RkSPkElGBdCaU=" crossorigin=anonymous></script><script defer src=/javascript/algolia_search.min.78d1e38d6ad73f7bc248762cbf4f70b246476baa3288e2a780ec7ac11f0e669d.js integrity=sha256-eNHjjWrXP3vCSHYsv09wskZHa6oyiOKngOx6wR8OZp0=></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-51515330-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></footer></body></html>